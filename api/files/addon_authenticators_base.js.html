<!DOCTYPE html>
<html>
  <head>
    <title>addon/authenticators/base.js - ember-simple-auth</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../assets/vendor/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/vendor/css/github.css">
    <link rel="stylesheet" href="../assets/vendor/css/font-awesome.min.css">
    <link rel="stylesheet" href="../assets/css/main.css">
    <script src="../assets/vendor/js/jquery.min.js"></script>
    <script src="../assets/vendor/js/bootstrap.min.js"></script>
    <script src="../assets/vendor/js/highlight.pack.js"></script>
  </head>
  <body>
    <header class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="../index.html">ember-simple-auth</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://github.com/mainmatter/ember-simple-auth"><i class="fa fa-github"></i> Source Code</a></li>
            <li><p class="navbar-text project-version"><a href="https://github.com/mainmatter/ember-simple-auth/releases/tag/5.0.0"><span class="label label-primary">5.0.0</span></a></p></li>
          </ul>
        </div>
      </div>
    </header>
    <div class="container">
      <div class="row">
        <div id="sidebar" class="col-sm-3">
          <div class="row">
            <div id="classes" class="col-sm-12">
              <h4>Classes</h4>
              <ul class="list-unstyled">
                  <li><a href="../classes/AdaptiveStore.html">AdaptiveStore</a></li>
                  <li><a href="../classes/BaseAuthenticator.html">BaseAuthenticator</a></li>
                  <li><a href="../classes/BaseStore.html">BaseStore</a></li>
                  <li><a href="../classes/Configuration.html">Configuration</a></li>
                  <li><a href="../classes/CookieStore.html">CookieStore</a></li>
                  <li><a href="../classes/DeviseAuthenticator.html">DeviseAuthenticator</a></li>
                  <li><a href="../classes/EphemeralStore.html">EphemeralStore</a></li>
                  <li><a href="../classes/LocalStorageStore.html">LocalStorageStore</a></li>
                  <li><a href="../classes/OAuth2ImplicitGrantAuthenticator.html">OAuth2ImplicitGrantAuthenticator</a></li>
                  <li><a href="../classes/OAuth2PasswordGrantAuthenticator.html">OAuth2PasswordGrantAuthenticator</a></li>
                  <li><a href="../classes/SessionService.html">SessionService</a></li>
                  <li><a href="../classes/SessionStorageStore.html">SessionStorageStore</a></li>
                  <li><a href="../classes/ToriiAuthenticator.html">ToriiAuthenticator</a></li>
              </ul>
            </div>
          </div>
        </div>
        <div id="main" class="col-sm-9">
          <h1 class="file-heading">File: addon/authenticators/base.js</h1>
          
          <div class="file">
              <pre class="code prettyprint linenums">
          import RSVP from &#x27;rsvp&#x27;;
          import Evented from &#x27;@ember/object/evented&#x27;;
          import EmberObject from &#x27;@ember/object&#x27;;
          
          /**
            The base class for all authenticators. __This serves as a starting point for
            implementing custom authenticators and must not be used directly.__
          
            The authenticator authenticates the session. The actual mechanism used to do
            this might, e.g., post a set of credentials to a server and in exchange
            retrieve an access token, initiating authentication against an external
            provider like Facebook, etc. The details depend on the specific authenticator.
            Upon successful authentication, any data that the authenticator receives and
            resolves via the promise returned from the
            {{#crossLink &quot;BaseAuthenticator/authenticate:method&quot;}}{{/crossLink}}
            method is stored in the session and can be accessed via the session service
            to be used by the authorizer (see
            {{#crossLink &quot;BaseAuthorizer/authorize:method&quot;}}{{/crossLink}}) to e.g.,
            authorize outgoing requests.
          
            The authenticator also decides whether a set of data that was restored from
            the session store (see
            {{#crossLink &quot;BaseStore/restore:method&quot;}}{{/crossLink}}) makes up an
            authenticated session or not.
          
            __Authenticators for an application are defined in the &#x60;app/authenticators&#x60;
            directory__, e.g.:
          
            &#x60;&#x60;&#x60;js
            // app/authenticators/oauth2.js
            import OAuth2PasswordGrantAuthenticator from &#x27;ember-simple-auth/authenticators/oauth2-password-grant&#x27;;
          
            export default class OAuth2Authenticator extends OAuth2PasswordGrantAuthenticator {
              ...
            }
            &#x60;&#x60;&#x60;
          
            and can then be used via the name Ember CLI automatically registers for them
            within the Ember container.
          
            &#x60;&#x60;&#x60;js
            // app/components/login-form.js
            import Component from &#x27;@ember/component&#x27;;
            import { inject as service } from &#x27;@ember/service&#x27;;
            import { action } from &#x27;@ember/object&#x27;;
          
            export default class LoginFormComponent extends Component {
              @service session;
          
              @action
              authenticate() {
                this.session.authenticate(&#x27;authenticator:oauth2&#x27;);
              }
            }
            &#x60;&#x60;&#x60;
          
            @class BaseAuthenticator
            @module ember-simple-auth/authenticators/base
            @extends Ember.Object
            @uses Ember.Evented
            @public
          */
          export default EmberObject.extend(Evented, {
            /**
              __Triggered when the authentication data is updated by the authenticator
              due to an external or scheduled event__. This might happen, e.g., if the
              authenticator refreshes an expired token or an event is triggered from an
              external authentication provider that the authenticator uses. The session
              handles that event, passes the updated data back to the authenticator&#x27;s
              {{#crossLink &quot;BaseAuthenticator/restore:method&quot;}}{{/crossLink}}
              method and handles the result of that invocation accordingly.
          
              @event sessionDataUpdated
              @param {Object} data The updated session data
              @public
            */
          
            /**
              __Triggered when the authentication data is invalidated by the authenticator
              due to an external or scheduled event__. This might happen, e.g., if a token
              expires or an event is triggered from an external authentication provider
              that the authenticator uses. The session handles the event and will
              invalidate itself when it is triggered.
          
              @event sessionDataInvalidated
              @public
            */
          
            /**
              Restores the session from a session data object. __This method is invoked
              by the session either on application startup if session data is restored
              from the session store__ or when properties in the store change due to
              external events (e.g. in another tab) and the new session data needs to be
              validated for whether it constitutes an authenticated session.
          
              __This method returns a promise. A resolving promise results in the session
              becoming or remaining authenticated.__ Any data the promise resolves with
              will be saved in and accessible via the session service&#x27;s
              &#x60;data.authenticated&#x60; property (see
              {{#crossLink &quot;SessionService/data:property&quot;}}{{/crossLink}}). A rejecting
              promise indicates that &#x60;data&#x60; does not constitute a valid session and will
              result in the session being invalidated or remaining unauthenticated.
          
              The &#x60;BaseAuthenticator&#x60;&#x27;s implementation always returns a rejecting
              promise. __This method must be overridden in subclasses.__
          
              @method restore
              @param {Object} data The data to restore the session from
              @return {Ember.RSVP.Promise} A promise that when it resolves results in the session becoming or remaining authenticated
              @public
            */
            restore() {
              return RSVP.reject();
            },
          
            /**
              Authenticates the session with the specified &#x60;args&#x60;. These options vary
              depending on the actual authentication mechanism the authenticator
              implements (e.g. a set of credentials or a Facebook account id etc.). __The
              session will invoke this method in order to authenticate itself__ (see
              {{#crossLink &quot;SessionService/authenticate:method&quot;}}{{/crossLink}}).
          
              __This method returns a promise. A resolving promise will result in the
              session becoming authenticated.__ Any data the promise resolves with will
              be saved in and accessible via the session service&#x27;s &#x60;data.authenticated&#x60;
              property (see {{#crossLink &quot;SessionService/data:property&quot;}}{{/crossLink}}).
              A rejecting promise indicates that authentication failed and will result in
              the session remaining unauthenticated.
          
              The &#x60;BaseAuthenticator&#x60;&#x27;s implementation always returns a rejecting promise
              and thus never authenticates the session. __This method must be overridden
              in subclasses__.
          
              @method authenticate
              @param {Any} [...args] The arguments that the authenticator requires to authenticate the session
              @return {Ember.RSVP.Promise} A promise that when it resolves results in the session becoming authenticated
              @public
            */
            authenticate() {
              return RSVP.reject();
            },
          
            /**
              This method is invoked as a callback when the session is invalidated. While
              the session will invalidate itself and clear all authenticated session data,
              it might be necessary for some authenticators to perform additional tasks
              (e.g. invalidating an access token on the server side).
          
              __This method returns a promise. A resolving promise will result in the
              session becoming unauthenticated.__ A rejecting promise will result in
              invalidation being intercepted and the session remaining authenticated.
          
              The &#x60;BaseAuthenticator&#x60;&#x27;s implementation always returns a resolving promise
              and thus never intercepts session invalidation. __This method doesn&#x27;t have
              to be overridden in custom authenticators__ if no actions need to be
              performed on session invalidation.
          
              @method invalidate
              @param {Object} data The current authenticated session data
              @param {Array} ...args additional arguments as required by the authenticator
              @return {Ember.RSVP.Promise} A promise that when it resolves results in the session being invalidated
              @public
            */
            invalidate() {
              return RSVP.resolve();
            }
          });
          
              </pre>
          </div>
        </div>
      </div>
    </div>
    <script type="text/javascript" charset="utf-8">
      function fixLeadingWhitespace(codeBlock) {
        var text = $(codeBlock).text();
        var lines = text.split('\n');
        var minLeadindSpaces = text.length;
        $.each(lines.slice(1), function(i, line) {
          var match = line.match(/^\s+/);
          if (match) {
            minLeadindSpaces = Math.min(match[0].length);
          }
        });
        var regexp = new RegExp('^\\s{' + minLeadindSpaces + '}');
        var fixedLines = lines.slice(0, 1).concat($.map(lines.slice(1), function(line) {
          return line.replace(regexp, '');
        }));
        $(codeBlock).text(fixedLines.join('\n'));
      }

      $(document).ready(function() {
        $('pre code').each(function(i, codeBlock) {
          fixLeadingWhitespace(codeBlock);
          hljs.highlightBlock(codeBlock);
        });
      });
    </script>
  </body>
</html>
